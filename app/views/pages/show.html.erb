<div class='container'>
  <div class = 'row'>
    <div class="card-product" style="background-image: url(https://source.unsplash.com/random/?photo)">
     <%= cl_image_tag @user.photo.key %>
    </div>
  </div>
  <div class ='row'>
    <div class = 'user-details'>
       <h4><strong> <%= @user.username %><strong> </h4>
       <p> <%= @user.description %> </p>
    </div>
  </div>
  <div class = 'row'>
    <div class="dropdown d-flex justify-content-center">
      <button class="btn btn-secondary dropdown-toggle" type="button" id="galleryDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Galleries
      </button>
      <div class="dropdown-menu">
      <% @galleries.each_with_index do |gallery, index| %>
        <% photo = gallery.photos.first %>
        <% bg_img = photo&.photo&.attached? ? cl_image_path(photo.photo.key) : 'https://images.unsplash.com/photo-1528203455795-d2211546bd8f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80' %>
        <a class="dropdown-item dropdown-item-styling" href="#" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('<%= bg_img %>')">
          <%= gallery.name %>
        </a>
      <% break if index == 1 %>
      <% end %>
    </div>
  </div>
  <div class = 'row mt-4'>
    <div class="dropdown d-flex justify-content-center">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="galleryDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Events
    </button>
    <div class="dropdown-menu">
      <% @events.reverse.each do |event| %>
        <% user = User.find(event.user_id) %>
        <a class="dropdown-item" href="<%= event_path(event) %>">
        <%= event.title %>
        <span class="float-right">
        <small>
        By: <%= user.username.capitalize %>
        <%= cl_image_tag user.photo.key, height: 20, width: 20, radius: 10, crop: :fill %>
        </small>
        </span>
        </a>
      <% end %>
    </div>
  <div>
</div>

<%# following to display only pictures from the user %>
<%# <% @my_galleries.each do |g| %>
  <%# <% my_pics = g.photo_ids %>
    <%# <% my_pics.each do |pic| %>
    <%# <% p = Photo.find(pic) %>
    <%# <%= cl_image_tag p.photo.key, height: 300, width: 400, crop: :fill %>
    <%# <% end %>
<%# <% end %>

<%# following to display only pictures from the user as galleries %>
<%# for now only one is moving because the carousel pages id are the same. to change, follow: %>
<%# https://stackoverflow.com/questions/10521257/is-it-possible-to-have-multiple-twitter-bootstrap-carousels-on-one-page %>
<%# <% @my_galleries.each do |g| %>
  <%# <% my_pics = g.photo_ids %>
  <%# <div class= "carousel slide m-3 d-flex justify-content-center">
   <%= render 'shared/gallery_carousel', my_pics: my_pics %>
  <%# </div> %>
<%# <% end %>
